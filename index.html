"""
CÓDIGO COMPLETO PARA GERAR IMAGEM DE SALDO COM USDC
Substitui completamente a versão anterior com ARC
Autor: Sistema de Atualização
Data: Atualizado com fundo claro e USDC
"""

from PIL import Image, ImageDraw, ImageFont
import os

def criar_imagem_saldo():
    """
    Cria uma imagem de saldo com fundo claro e moeda USDC
    Substitui a versão anterior que usava ARC
    """
    
    # Configurações da imagem
    LARGURA = 450
    ALTURA = 220
    COR_FUNDO = '#F0F2F5'  # Cinza azulado claro (estilo moderno)
    COR_TEXTO = '#1A1A1A'  # Quase preto para bom contraste
    COR_DESTAQUE = '#2E5BFF'  # Azul para realce
    
    # Criar imagem com fundo claro
    imagem = Image.new('RGB', (LARGURA, ALTURA), color=COR_FUNDO)
    desenho = ImageDraw.Draw(imagem)
    
    # Carregar fontes com múltiplos fallbacks
    try:
        # Tentar Arial (Windows)
        fonte_titulo = ImageFont.truetype("arial.ttf", 48)
        fonte_saldo = ImageFont.truetype("arial.ttf", 56)
        fonte_moeda = ImageFont.truetype("arial.ttf", 42)
    except:
        try:
            # Tentar Roboto ou similar (Linux/Android)
            fonte_titulo = ImageFont.truetype("/usr/share/fonts/truetype/roboto/Roboto-Bold.ttf", 48)
            fonte_saldo = ImageFont.truetype("/usr/share/fonts/truetype/roboto/Roboto-Bold.ttf", 56)
            fonte_moeda = ImageFont.truetype("/usr/share/fonts/truetype/roboto/Roboto-Medium.ttf", 42)
        except:
            try:
                # Tentar Helvetica (macOS)
                fonte_titulo = ImageFont.truetype("/Library/Fonts/Helvetica.ttc", 48)
                fonte_saldo = ImageFont.truetype("/Library/Fonts/Helvetica.ttc", 56)
                fonte_moeda = ImageFont.truetype("/Library/Fonts/Helvetica.ttc", 42)
            except:
                # Fallback final
                fonte_titulo = ImageFont.load_default()
                fonte_saldo = ImageFont.load_default()
                fonte_moeda = ImageFont.load_default()
    
    # Desenhar elemento de fundo decorativo
    desenho.rectangle([0, 0, LARGURA, 80], fill='#FFFFFF', outline='#E0E6ED')
    
    # Adicionar logo "Sabbo"
    desenho.text((30, 25), "SABBO", fill=COR_DESTAQUE, font=fonte_titulo)
    
    # Adicionar rótulo "Saldo:"
    desenho.text((30, 100), "Saldo:", fill='#666666', font=fonte_moeda)
    
    # Adicionar valor do saldo
    desenho.text((30, 140), "0.0009", fill=COR_TEXTO, font=fonte_saldo)
    
    # Adicionar moeda USDC (em vez de ARC)
    desenho.text((180, 155), "USDC", fill=COR_DESTAQUE, font=fonte_moeda)
    
    # Adicionar indicador visual de criptomoeda
    desenho.ellipse([350, 100, 400, 150], fill=COR_DESTAQUE)
    desenho.text((365, 115), "$", fill='white', font=fonte_moeda)
    
    # Adicionar borda estilizada
    desenho.rectangle([5, 5, LARGURA-5, ALTURA-5], outline='#D1D9E6', width=2)
    
    # Adicionar rodapé informativo
    desenho.text((30, ALTURA-30), "Atualizado: USDC em vez de ARC", fill='#888888', font=ImageFont.load_default())
    
    return imagem

def salvar_e_mostrar_imagem():
    """Salva a imagem e exibe mensagem de confirmação"""
    
    # Criar a imagem
    imagem_final = criar_imagem_saldo()
    
    # Nome do arquivo (substitui o anterior)
    nome_arquivo = "saldo_jogo_usdc.png"
    
    # Salvar a imagem
    imagem_final.save(nome_arquivo, "PNG", quality=95)
    
    # Mostrar mensagem de sucesso
    print("=" * 60)
    print("IMAGEM ATUALIZADA CRIADA COM SUCESSO!")
    print("=" * 60)
    print(f"Arquivo: {nome_arquivo}")
    print("Alterações aplicadas:")
    print("✓ Fundo alterado para claro (#F0F2F5)")
    print("✓ Moeda alterada de ARC para USDC")
    print("✓ Design modernizado com elementos visuais")
    print("✓ Texto em cores de alto contraste")
    print("✓ Indicador de criptomoeda adicionado")
    print("=" * 60)
    print("INSTRUÇÕES:")
    print(f"1. O arquivo anterior foi substituído por '{nome_arquivo}'")
    print("2. Use esta imagem no seu jogo")
    print("3. O saldo agora aparece em USDC")
    print("=" * 60)
    
    # Perguntar se quer visualizar a imagem
    resposta = input("Deseja visualizar a imagem agora? (s/n): ")
    if resposta.lower() == 's':
        imagem_final.show()
    
    return nome_arquivo

def verificar_requisitos():
    """Verifica se a biblioteca Pillow está instalada"""
    try:
        from PIL import Image
        print("✓ Biblioteca Pillow está instalada")
        return True
    except ImportError:
        print("✗ Biblioteca Pillow não está instalada")
        print("Instale com: pip install Pillow")
        return False

# ==================== EXECUÇÃO PRINCIPAL ====================
if __name__ == "__main__":
    print("\n" + "=" * 60)
    print("SISTEMA DE ATUALIZAÇÃO DE IMAGEM DO JOGO")
    print("Substituindo ARC por USDC com fundo claro")
    print("=" * 60 + "\n")
    
    # Verificar requisitos
    if verificar_requisitos():
        # Criar e salvar a nova imagem
        arquivo_criado = salvar_e_mostrar_imagem()
        
        # Sugerir próximos passos
        print("\nPRÓXIMOS PASSOS:")
        print(f"1. Substitua a imagem antiga por '{arquivo_criado}' no seu jogo")
        print("2. Atualize qualquer referência no código para 'USDC'")
        print("3. Teste o jogo para garantir que está correto")
        print("\nAtualização concluída com sucesso!")
